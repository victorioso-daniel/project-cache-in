erDiagram
    %% ENTITIES

    USER {
        id INT
        username STRING
        password STRING
        display_name STRING
    }

    ROLE {
        id INT
        name STRING
    }

    PERMISSION {
        id INT
        name STRING
    }

    USER_ROLE {
        id INT
        user_id INT
        role_id INT
    }

    ROLE_PERMISSION {
        id INT
        role_id INT
        permission_id INT
    }

    QUIZ_EVENT {
        id INT
        title STRING
        is_active BOOLEAN
        created_at DATETIME
        created_by INT
    }

    TEAM {
        id INT
        name STRING
        access_code STRING
        quiz_event_id INT
    }

    QUESTION {
        id INT
        quiz_event_id INT
        question_text STRING
        difficulty STRING
        correct_answer STRING
        points INT
    }

    QUESTION_CHOICE {
        id INT
        question_id INT
        choice_text STRING
        is_correct BOOLEAN
    }

    SUBMISSION {
        id INT
        team_id INT
        question_id INT
        answer_text STRING
        is_correct BOOLEAN
        points_earned INT
        submitted_at DATETIME
    }

    EVENT_WINNER {
        id INT
        team_id INT
        quiz_event_id INT
        rank INT
        total_score INT
    }

    %% RELATIONSHIPS

    USER ||--o{ USER_ROLE : has
    ROLE ||--o{ USER_ROLE : assigned
    ROLE ||--o{ ROLE_PERMISSION : grants
    PERMISSION ||--o{ ROLE_PERMISSION : belongs
    USER ||--o{ QUIZ_EVENT : creates
    QUIZ_EVENT ||--o{ TEAM : has
    QUIZ_EVENT ||--o{ QUESTION : contains
    QUIZ_EVENT ||--o{ EVENT_WINNER : results
    TEAM ||--o{ SUBMISSION : submits
    TEAM ||--o{ EVENT_WINNER : ranks
    QUESTION ||--o{ QUESTION_CHOICE : choices
    QUESTION ||--o{ SUBMISSION : receives